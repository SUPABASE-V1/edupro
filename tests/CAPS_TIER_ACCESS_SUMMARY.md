# CAPS Curriculum & Lesson Generation - Tier Access Summary

**Test Date:** 2025-10-22  
**Purpose:** Document which subscription tiers have access to CAPS curriculum integration and educational features

---

## 📊 Feature Access by Tier

### FREE Tier (R0/month)
**Lesson Generation:**
- ✓ Basic lesson help (5 lessons/month)
- ✗ CAPS curriculum search
- ✗ Past exam questions
- ✗ Practice test generation
- ✗ CAPS-aligned lessons

**Homework & Grading:**
- ✓ Basic homework help (15 requests/month)
- ✓ Basic grading for math/multiple choice (5 gradings/month)
- ✗ Advanced essay grading

**Voice Features:**
- ✓ Voice assistance (60 chunks = ~30 minutes/month)

**AI Models:**
- Claude 3 Haiku (Fast, economical)

**For Parents:**
- Can help children with basic homework questions
- Cannot access past exams or CAPS materials directly
- Limited to generic educational help

**For Teachers:**
- Can create basic generic lessons
- No access to CAPS curriculum alignment
- Cannot access past papers or exam patterns

---

### STARTER Tier (R299/month - Parent Starter)
**Lesson Generation:**
- ✓ Lesson generation (20 lessons/month)
- ✓ CAPS curriculum search
- ✓ Past exam questions access
- ✓ Practice test generation
- ✓ CAPS-aligned lesson plans

**Homework & Grading:**
- ✓ Homework help (100 requests/month)
- ✓ Basic grading (20 gradings/month)
- ✗ Advanced essay grading

**Voice Features:**
- ✓ Voice assistance (120 chunks = ~60 minutes/month)

**AI Models:**
- Claude 3 Haiku
- Claude 3 Sonnet (Better quality)

**For Parents:**
- ✓ Can help children with CAPS-specific homework
- ✓ Access past exam questions for practice
- ✓ Get curriculum-aligned explanations
- ✓ Generate practice tests for specific topics

**For Teachers:**
- ✓ Create CAPS-aligned lesson plans
- ✓ Search official DBE curriculum documents
- ✓ Access past papers (2014-2024)
- ✓ Generate practice tests from real exam questions
- ✓ Curriculum references in all generated content

---

### PREMIUM Tier (R599/month - Parent Plus / Pro)
**Lesson Generation:**
- ✓ Lesson generation (50 lessons/month)
- ✓ CAPS curriculum search
- ✓ Past exam questions access
- ✓ Practice test generation
- ✓ CAPS-aligned lesson plans
- ✓ **Adaptive lessons** (adjusts to student progress)
- ✓ **Personalized lessons** (tailored to individual students)

**Homework & Grading:**
- ✓ Homework help (300 requests/month)
- ✓ Basic grading (100 gradings/month)
- ✓ **Advanced essay grading** (subjective content)
- ✓ **Bulk grading** (100+ submissions)
- ✓ **Auto-generate rubrics**
- ✓ **Personalized feedback**

**Voice Features:**
- ✓ Voice assistance (300 chunks = ~2.5 hours/month)

**AI Models:**
- Claude 3 Haiku
- Claude 3 Sonnet
- Claude 3 Opus (Most powerful)

**For Parents:**
- ✓ All Starter features
- ✓ Personalized learning paths for their children
- ✓ Adaptive practice based on performance
- ✓ Advanced explanations for complex topics
- ✓ More usage quota for intensive study periods

**For Teachers:**
- ✓ All Starter features
- ✓ Adaptive lessons that adjust difficulty automatically
- ✓ Personalized lesson plans for different student needs
- ✓ Bulk grading with detailed rubrics
- ✓ Advanced essay grading with subjective feedback
- ✓ Priority AI processing for faster results

---

### ENTERPRISE Tier (Custom pricing)
**Lesson Generation:**
- ✓ Lesson generation (5,000 lessons/month)
- ✓ All Premium features
- ✓ Custom CAPS integration
- ✓ Dedicated support

**Homework & Grading:**
- ✓ Homework help (30,000 requests/month)
- ✓ Grading assistance (10,000 gradings/month)
- ✓ All advanced features

**Voice Features:**
- ✓ Voice assistance (36,000 chunks = ~300 hours/month)

**AI Models:**
- All models available
- Priority queue access
- Custom model configurations

**For Schools/Preschools:**
- ✓ Unlimited usage for all teachers
- ✓ Custom CAPS curriculum integration
- ✓ White-label options
- ✓ Dedicated account manager
- ✓ Custom training and onboarding

---

## 🎯 Key Capabilities Matrix

| Feature | FREE | STARTER | PREMIUM | ENTERPRISE |
|---------|------|---------|---------|------------|
| **CAPS Curriculum Search** | ✗ | ✓ | ✓ | ✓ |
| **Past Exam Questions** | ✗ | ✓ | ✓ | ✓ |
| **Practice Test Generation** | ✗ | ✓ | ✓ | ✓ |
| **CAPS-Aligned Lessons** | ✗ | ✓ | ✓ | ✓ |
| **Adaptive Lessons** | ✗ | ✗ | ✓ | ✓ |
| **Personalized Content** | ✗ | ✗ | ✓ | ✓ |
| **Essay Grading** | ✗ | ✗ | ✓ | ✓ |
| **Bulk Operations** | ✗ | ✗ | ✓ | ✓ |
| **Monthly Lessons** | 5 | 20 | 50 | 5,000 |
| **Monthly Homework Help** | 15 | 100 | 300 | 30,000 |
| **Voice Minutes** | 30 | 60 | 150 | 18,000 |

---

## 📚 How It Works: Teacher Use Cases

### Creating a CAPS-Aligned Lesson (Starter+)

1. **Teacher opens AI Lesson Generator**
   ```
   Topic: Fractions
   Grade: 5
   Subject: Mathematics
   ```

2. **Dash AI searches CAPS curriculum**
   - Finds relevant sections from official DBE documents
   - Identifies correct term/week placement
   - Extracts specific learning outcomes

3. **Generates structured lesson:**
   ```
   CAPS Reference: Grade 5 Mathematics, Term 2, Week 3-5
   
   Learning Outcomes (from CAPS):
   - Solve problems in contexts involving fractions
   - Recognize and represent fractions (halves, thirds, quarters, fifths, tenths)
   - Compare and order fractions
   
   Activities:
   [CAPS-aligned activities with prescribed terminology]
   
   Assessment:
   [Aligned with CAPS assessment standards]
   ```

### Accessing Past Exam Questions (Starter+)

1. **Teacher requests:** "Show me Grade 12 Math Paper 2 calculus questions"

2. **Dash AI retrieves:**
   ```
   2023: Question 6.1 - First derivative (4 marks)
   2022: Question 5 - Rate of change (6 marks)
   2021: Question 7.2 - Optimization (10 marks)
   
   Pattern Analysis:
   - Calculus appears in 100% of papers
   - Average marks: 40-50 per paper
   - High probability topics for 2025:
     * Optimization problems (85%)
     * Rate of change (75%)
     * Cubic function analysis (90%)
   ```

3. **Teacher can:**
   - Generate practice test with similar questions
   - See marking guidelines
   - Understand exam patterns

---

## 👨‍👩‍👧 How It Works: Parent Use Cases

### Helping with Homework (All Tiers)

1. **Parent asks:** "Help my Grade 10 child understand this algebra problem"

2. **Free Tier:**
   - Generic explanation of algebra concepts
   - Step-by-step solution
   - Limited to 15 questions/month

3. **Starter+ Tier:**
   - CAPS-specific explanation using correct terminology
   - References to relevant curriculum section
   - Shows how it relates to exam requirements
   - More questions allowed (100-300/month)

### Exam Preparation (Starter+)

1. **Parent asks:** "Generate a practice test for Grade 11 Physical Sciences"

2. **Dash AI creates:**
   ```
   Practice Test - Grade 11 Physical Sciences
   Duration: 90 minutes | Total: 100 marks
   
   Based on past papers 2020-2024:
   
   Section A: Multiple Choice (20 marks)
   [Questions from actual past papers]
   
   Section B: Structured Questions (50 marks)
   [Real exam-style questions with marking guidelines]
   
   Section C: Long Questions (30 marks)
   [Combines high-frequency topics]
   
   Includes: Full marking memorandum
   ```

---

## 🔐 Access Control Implementation

### How Tier Gating Works:

```typescript
// When user tries to generate CAPS-aligned lesson
const { allowed, reason } = await canUseFeature('lesson_generation')

if (!allowed) {
  // Show upgrade prompt
  if (reason === 'over_quota') {
    "You've used all 5 free lessons this month. 
     Upgrade to Starter for 20 CAPS-aligned lessons/month."
  } else {
    "CAPS curriculum features require Starter tier or higher"
  }
}

// When user searches CAPS curriculum
if (tier === 'free') {
  // Blocked - show upgrade prompt
  "CAPS curriculum search available from Starter tier (R299/month)"
} else {
  // Search official DBE documents
  await searchCAPSCurriculum({ grade, subject, topic })
}
```

### Database-Level Protection:

- CAPS documents stored in `caps_documents` table
- Access controlled by RLS (Row Level Security)
- Only users with `lesson_generation` quota can access
- Usage tracked per user per month

---

## 🚀 Running the Tests

To verify tier access programmatically:

```bash
# Run the tier access test
npx ts-node tests/caps-tier-access-test.ts
```

Expected output:
```
╔═══════════════════════════════════════════════════════════╗
║     CAPS CURRICULUM & LESSON GENERATION ACCESS TEST       ║
║              By Subscription Tier                         ║
╚═══════════════════════════════════════════════════════════╝

Testing Tier: FREE
──────────────────────────────────────────────────────────
Lesson Generation:
  Access: ✓ YES
  Monthly Quota: 5 lessons
  Available Models: Claude 3 Haiku

CAPS Curriculum Features:
  Search Curriculum: ✗ NO
  Access Past Exams: ✗ NO
  Generate Practice Tests: ✗ NO

[... full test output for all tiers ...]

KEY FINDINGS:
✓ Teachers can create CAPS-aligned lessons starting from: STARTER
✓ Parents can help with homework starting from: FREE
✓ Past exam access available from: STARTER
✓ Voice assistance (Dash AI) available from: FREE
```

---

## 💡 Recommendations

### For Teachers:
- **Free tier** is suitable for trying out the platform
- **Starter tier** is minimum recommended for CAPS-aligned teaching (R299/month)
- **Premium tier** recommended for full-time teachers needing adaptive/personalized content (R599/month)

### For Parents:
- **Free tier** works for occasional homework help
- **Starter tier** recommended for exam prep and CAPS-specific help (R299/month)
- **Premium tier** for intensive tutoring and personalized learning paths (R599/month)

### For Preschools/Schools:
- **Enterprise tier** provides unlimited usage across all staff
- Custom pricing based on number of teachers
- Dedicated support and training included

---

## 📝 Test Results Location

- **Test Script:** `/tests/caps-tier-access-test.ts`
- **Usage Limits:** `/lib/ai/limits.ts`
- **Capabilities:** `/lib/ai/capabilities.ts`
- **Model Selection:** `/hooks/useAIModelSelection.ts`

---

**Last Updated:** 2025-10-22  
**Test Status:** ✅ Automated tests available  
**Documentation:** Complete
